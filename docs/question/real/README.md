---
title: 题海拾贝
tags:
  - 真题
---

# 题目搜集

## this 相关

#### 001. 下列代码执行后的结果是

```js
var Factory = function () {
  this.a = "a";
  this.b = "b";
  this.c = {
    a: "a+",
    b: () => this.a,
  };
};

console.log(new Factory().c.b());
```

::: details
a
:::

## JS 原生 API 相关

#### 002. 下列代码执行的输出结果

```js
console.log(["1", "2", "3"].map(parseInt));
```

:::details
[ 1, NaN, NaN ]
:::
:::tip
解析

- _parseInt(string, radix)_ 解析一个字符串并返回指定基数的十进制整数， radix 是 2-36 之间的整数，表示被解析字符串的基数

- 当 string 中的第一个非空格字符串不能转换为数字或者 radix 小于 2 或者 大于 36，返回 NaN

- 如果 radix 是 undefined 或者 0 或者未指定，JS 会根据输入的 string 来假定取值：
  - 输入的 string 以 '0x' 开头，假定为 16 进制
  - 输入的 string 以 '0' 开头，ES5 规定应该假定为 10 进制

map 方法接收一个回调函数，该函数有两个参数分别是遍历到的数组当前项和其对应的索引，即 arr.map((item, index) => {})

本题中将 parseInt 当做 map 的回调函数，进制对应的是 index，分别为 0、1、2

radix 为 0，当作 10 进制处理，返回 1

radix 为 1，小于 2，返回 NaN；

radix 为 2，当作 2 进制处理，但此时要处理的值是 3，二进制中只有 0 和 1，无法解析 3，返回 NaN
:::

## 算法相关
#### 003. 计算菲波那切数列的第 N 项

#### 递归

```
const fib = (n) => {
  if (n === 0) return 0
  if (n === 1) return 1
  return fib(n-2) + fib(n-1)
}
```

#### 迭代

```
const fib = (n) => {
  if (n === 0) return 0;
  let a1 = 0, a2 = 1;
  for (let i = 1; i < n; i += 1>) {
    [a1, a2] = [a2, a1 + a2];
  }
  return a2;
}
```
## 网络相关
#### 004. 输入 URL 到页面的呈现

网络连接阶段
  - 浏览器根据地址栏中输入的信息生成完整的 `URL`，使用 `DNS` 解析域名查找对应的 `IP` 地址，这里 `DNS` 是有缓存的，会依次在浏览器、操作系统里查找缓存，然后是本地 `hosts` 文件中的域名记录，都没有找到的话就去访问当前的 `DNS` 服务器，比如三大运营商或者手动设置谷歌的 `8.8.8.8`，还没有找到的话就由当前 `DNS` 服务器向根域名服务器查找
    > `DNS` 解析使用 `udp` 协议
    >
    > 一个域名可以对应多个 `IP`，因此可以利用 `DNS` 做负载均衡
  - 成功获取到服务器 `IP` 地址，需要经过三次握手建立 `TCP` 连接。首先浏览器发送包含 `SYN` 为 1 的连接请求报文段，服务器接收到后回复 `SYN+ACK` 的确认报文段，客户端成功接收后再向服务器发送 `ACK` 报文段，三次握手完成，TCP 通道建立
  - 有了可靠的 `TCP` 连接通道后就可以发送 `HTTP` 请求了，服务器处理请求并返回响应。浏览器接收响应并解析，如果发现返回的是重定向相关的状态码比如 301，则读取响应头中`Location` 字段的地址重新发送请求，待资源返回后进行处理。
    > 当然在请求链路上存在着多级代理服务器或 `CDN`，资源也可能由它们返回
  - 浏览器解析响应内容，根据响应资源的 `Content-type` 或者对响应实体进行 `MIME` 类型嗅探确定资源类型，同时会进行安全检查，如果域名和响应数据匹配已知的恶意网站，或者受到**跨域限制**，则显示警告或者抛出错误，不会将未允许的敏感跨站点数据发送给渲染进程

页面渲染阶段
  - 浏览器自上而下解析 `HTML` 文件，通过词法分析、语法分析将 `HTML` 字符串解析为浏览器能理解的结构，构建 `DOM` 树，在这过程中如果遇到 `JS` 脚本则会暂停 `DOM` 解析，优先执行脚本代码
  - 解析 `CSS`，计算出每个 `DOM` 节点的样式
  - 布局。计算 `DOM` 树中**可见元素**的几何位置信息
  - 分层。将页面划分成多个图层
  - 栅格化。合成线程将图层划分为一个个图块，优先将视口附近的图块通过栅格化转换为位图
  - 所有图块光栅化完成，绘制并显示到页面上